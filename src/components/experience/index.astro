---
import type { Props } from "./props";
import IconArrow from "../icons/arrow.astro";

const { dates, title, company, companyUrl, description, technologies, logo, id } =
  Astro.props;
---

<li class="experience-item">
  <div
    class="group relative grid pb-1 sm:grid-cols-8 sm:gap-8 md:gap-4 lg:hover:!opacity-100 lg:group-hover/list:opacity-50"
  >
    <div
      class="absolute -inset-x-4 -inset-y-4 z-0 hidden rounded-2xl lg:-inset-x-6 lg:block lg:group-hover:bg-violet-900/10 lg:group-hover:border lg:group-hover:border-violet-500/20"
    >
    </div>
    <header
      class="z-10 mb-2 mt-1 text-xs font-mono font-semibold uppercase tracking-wide text-violet-400/70 sm:col-span-2"
      aria-label={dates}
    >
      <span>{dates}</span>
    </header>
    <div class="z-10 sm:col-span-6">
      <h3 class="font-medium leading-snug">
        <div>
          <a
            class="inline-flex items-baseline font-medium leading-tight text-slate-200 hover:text-violet-300 group/link text-base"
            href={companyUrl}
            target="_blank"
            rel="noreferrer"
            aria-label={title}
          >
            <span
              class="absolute -inset-x-4 -inset-y-2.5 hidden rounded md:-inset-x-6 md:-inset-y-4 lg:block"
            ></span>
            <div class="flex gap-x-3 items-center">
              {
                logo && (
                  <img
                    class="w-10 h-10 rounded-lg bg-violet-500/10 border border-violet-500/20 p-1"
                    src={logo}
                    alt={`${company} logo`}
                  />
                )
              }
              <span>
                <span class="experience-title" data-i18n={`exp-title-${id || ''}`}>{title}</span>
                <span class="text-violet-400/60"> Â· </span>
                <span class="inline-block text-cyan-300/80">
                  {company}
                  <IconArrow />
                </span>
              </span>
            </div>
          </a>
        </div>
      </h3>
      <p class="mt-3 text-sm leading-relaxed text-slate-400 experience-description" data-i18n={`exp-desc-${id || ''}`}>
        {description}
      </p>
      {
        technologies.length && (
          <ul class="mt-4 flex flex-wrap gap-2" aria-label="Technologies used">
            {technologies.map((technology) => (
              <li>
                <div class="flex items-center rounded-full border border-violet-500/20 bg-violet-500/10 px-3 py-1 text-xs font-medium leading-5 text-violet-300">
                  {technology}
                </div>
              </li>
            ))}
          </ul>
        )
      }
    </div>
  </div>
</li>

<style>
  .experience-item {
    position: relative;
    padding-left: 1rem;
  }

  .experience-item::before {
    content: '';
    position: absolute;
    left: 0;
    top: 0.5rem;
    width: 6px;
    height: 6px;
    border-radius: 50%;
    background: linear-gradient(135deg, #8b5cf6, #06b6d4);
  }

  .experience-item::after {
    content: '';
    position: absolute;
    left: 2px;
    top: 1rem;
    width: 2px;
    height: calc(100% - 0.5rem);
    background: linear-gradient(180deg, rgba(139, 92, 246, 0.3), transparent);
  }

  .experience-item:last-child::after {
    display: none;
  }
</style>
